# ğŸ”§ Chromeè­¦å‘Šè§£å†³æ–¹æ¡ˆ

## âš ï¸ è­¦å‘Šä¿¡æ¯
```
crbug/1173575, non-JS module files deprecated.
```

## ğŸ” é—®é¢˜åˆ†æ

è¿™ä¸ªè­¦å‘Šæ˜¯Chromeæµè§ˆå™¨çš„ä¸€ä¸ªå·²çŸ¥é—®é¢˜ï¼Œé€šå¸¸å‡ºç°åœ¨ä»¥ä¸‹æƒ…å†µï¼š

1. **MIMEç±»å‹ä¸æ­£ç¡®** - æŸäº›æ–‡ä»¶è¢«è¯†åˆ«ä¸ºéJavaScriptç±»å‹
2. **æ¨¡å—è·¯å¾„è§£æé—®é¢˜** - importè¯­å¥çš„è·¯å¾„è§£ææœ‰æ­§ä¹‰
3. **Three.jså†…éƒ¨ä¾èµ–** - Three.jsçš„æŸäº›æ¨¡å—å¯èƒ½è§¦å‘è¿™ä¸ªè­¦å‘Š

## ğŸš€ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä½¿ç”¨è°ƒè¯•æœåŠ¡å™¨ï¼ˆæ¨èï¼‰

```bash
# å¯åŠ¨è°ƒè¯•æœåŠ¡å™¨ï¼ŒæŸ¥çœ‹è¯¦ç»†è¯·æ±‚ä¿¡æ¯
python debug_chrome_warnings.py
```

**ä¼˜åŠ¿ï¼š**
- æ˜¾ç¤ºæ‰€æœ‰è¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯
- å¸®åŠ©å®šä½å…·ä½“çš„é—®é¢˜æ–‡ä»¶
- æ›´å¥½çš„MIMEç±»å‹å¤„ç†

### æ–¹æ¡ˆ2ï¼šæ›´æ–°çš„importmapé…ç½®

å·²æ›´æ–° `index.html` ä¸­çš„importmapï¼š

```json
{
    "imports": {
        "three": "./libs/three/three.module.js",
        "three/addons/": "./libs/three/addons/",
        "three/addons/loaders/GLTFLoader.js": "./libs/three/addons/loaders/GLTFLoader.js",
        "three/addons/utils/BufferGeometryUtils.js": "./libs/three/addons/utils/BufferGeometryUtils.js"
    }
}
```

**æ”¹è¿›ï¼š**
- æ˜ç¡®æŒ‡å®šå…·ä½“æ–‡ä»¶è·¯å¾„
- å‡å°‘è·¯å¾„è§£æçš„æ­§ä¹‰
- æ›´å¥½çš„æ¨¡å—è§£æ

### æ–¹æ¡ˆ3ï¼šå¿½ç•¥è­¦å‘Šï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰

å¦‚æœè­¦å‘Šä¸å½±å“åŠŸèƒ½ï¼Œå¯ä»¥æš‚æ—¶å¿½ç•¥ï¼š

1. **æ‰“å¼€Chromeå¼€å‘è€…å·¥å…·**
2. **ç‚¹å‡»è®¾ç½®å›¾æ ‡ï¼ˆâš™ï¸ï¼‰**
3. **å‹¾é€‰ "Hide warnings"**

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### MIMEç±»å‹é…ç½®

æœåŠ¡å™¨ç°åœ¨æ­£ç¡®è®¾ç½®ï¼š

```python
def guess_type(self, path):
    if path.endswith('.js') or path.endswith('.mjs'):
        return 'application/javascript'  # âœ… æ­£ç¡®çš„MIMEç±»å‹
    elif path.endswith('.glb'):
        return 'model/gltf-binary'
    elif path.endswith('.gltf'):
        return 'model/gltf+json'
```

### å“åº”å¤´ä¼˜åŒ–

```python
def end_headers(self):
    self.send_header('X-Content-Type-Options', 'nosniff')
    self.send_header('Cache-Control', 'no-cache')
    # ... å…¶ä»–å¤´éƒ¨
```

## ğŸ¯ æµ‹è¯•æ­¥éª¤

1. **å¯åŠ¨è°ƒè¯•æœåŠ¡å™¨ï¼š**
   ```bash
   python debug_chrome_warnings.py
   ```

2. **åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š**
   ```
   http://localhost:8802
   ```

3. **æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼š**
   - æœåŠ¡å™¨ä¼šæ˜¾ç¤ºæ‰€æœ‰è¯·æ±‚è¯¦æƒ…
   - æŸ¥çœ‹æ˜¯å¦è¿˜æœ‰è­¦å‘Š

4. **æ£€æŸ¥Chromeå¼€å‘è€…å·¥å…·ï¼š**
   - Networkæ ‡ç­¾ï¼šæ£€æŸ¥æ–‡ä»¶çš„MIMEç±»å‹
   - Consoleæ ‡ç­¾ï¼šæŸ¥çœ‹æ˜¯å¦è¿˜æœ‰è­¦å‘Š

## ğŸ“Š å¸¸è§åŸå› å’Œè§£å†³æ–¹æ³•

| åŸå›  | è§£å†³æ–¹æ³• |
|------|----------|
| MIMEç±»å‹é”™è¯¯ | âœ… å·²ä¿®å¤ï¼šä½¿ç”¨æ­£ç¡®çš„æœåŠ¡å™¨é…ç½® |
| è·¯å¾„è§£ææ­§ä¹‰ | âœ… å·²ä¿®å¤ï¼šæ›´æ–°importmap |
| Three.jså†…éƒ¨é—®é¢˜ | âš ï¸ å¯èƒ½éœ€è¦ç­‰å¾…Three.jsæ›´æ–° |
| Chromeç‰ˆæœ¬é—®é¢˜ | ğŸ’¡ å°è¯•æ›´æ–°Chromeæˆ–ä½¿ç”¨å…¶ä»–æµè§ˆå™¨ |

## ğŸ® æœ€ç»ˆå»ºè®®

1. **ä½¿ç”¨è°ƒè¯•æœåŠ¡å™¨** - å¸®åŠ©å®šä½å…·ä½“é—®é¢˜
2. **æ£€æŸ¥æ§åˆ¶å°è¾“å‡º** - æŸ¥çœ‹è¯¦ç»†çš„è¯·æ±‚ä¿¡æ¯
3. **å¦‚æœæ¸¸æˆæ­£å¸¸è¿è¡Œ** - å¯ä»¥æš‚æ—¶å¿½ç•¥è­¦å‘Š
4. **å®šæœŸæ›´æ–°Three.js** - æ–°ç‰ˆæœ¬å¯èƒ½ä¿®å¤è¿™äº›é—®é¢˜

## ğŸ”„ å¯åŠ¨å‘½ä»¤

```bash
# è°ƒè¯•æ¨¡å¼ï¼ˆæ¨èï¼‰
python debug_chrome_warnings.py

# æ™®é€šæ¨¡å¼
python simple_server.py

# å®Œæ•´åŠŸèƒ½æ¨¡å¼
python server.py
```

é€‰æ‹©æœ€é€‚åˆæ‚¨éœ€æ±‚çš„å¯åŠ¨æ–¹å¼ï¼
